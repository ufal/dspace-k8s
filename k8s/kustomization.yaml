apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# Set namespace for all resources
namespace: clarin-dspace-ns

resources:
  # No assets-pvc.yaml - using S3-only storage (no local assetstore)
  - solr-pvc.yaml
  - postgres-cnpg-cluster.yaml
  - solr-service.yaml
  - solr-statefulset.yaml
  #- dspace-configmap.yaml
  - backend-service.yaml
  - backend-deployment.yaml
  - angular-service.yaml
  - angular-deployment.yaml
  - dspace-ingress.yaml
  - dspace-cronjobs.yaml
  - sealed-secrets.yaml

configMapGenerator:
- name: local-config-map
  files:
  - local.cfg
  # Angular runtime config used by the dspace/dspace-angular image (SSR)
  - config.yml
  - environment.prod.ts
  - user_exists.jsh
